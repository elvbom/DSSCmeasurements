close all
clear

res = [999999 899999 799999 699999 599999 499999 399999 299999 199999 99999 89999 79999 69999 59999 49999 39999 29999 19999 9999 8999 7999 6999 5999 4999 3999 2999 1999 999 899 799 699 599 499 399 299 199 99 89 79 69 59 49 39 29 19 9 8 7 6 5 4 3 2 1 0];

%--------------------------------------------------------------------------
%w 5 measurements, airampo

%stora b?garen
%mV, 999 999 - 0 Ohm
aC1_V = 200;
aC2_V = [600 600 530 530 529 529 529 528 528 527 526 522 521 520 518 517 515 513 509 507 497 486 443 431 418 401 377 343 297 232 160 073 064 057 49.1 40.6 32.5 24.4 16.2 8.0 7.2 6.4 5.6 4.7 3.9 3.0 2.2 1.4 0.6 0.4 0.3 0.3 0.2 0.1 0];

aB1_V = [402 402 396 393 388 385 374 374 363 358 349 336 330 323 316 306 296 287 286 282 283 284 282 192 073 052 026 023 021 19.7 17.0 14.2 8.7 5.8 2.8 2.5 2.2 1.9 1.6 1.3 1.0 0.7 0.4 0.1 0.1 0 0 0 0 0 0 0 0 0 0];
aB2_V = 490;
aB3_V = [566 566 564 563 561 559 557 555 553 550 547 540 539 533 527 522 516 509 498 474 402 374 340 310 276 235 193 149 101 48.5 43.6 38.6 33.5 28.6 23.5 18.9 14.0 9.2 4.5 4.0 3.5 3.1 2.6 2.1 1.6 1.2 0.7 0.3 0.2 0.2 0.1 0.1 0 0 0];

aC2_I = aC2_V./res;
aB1_I = aB1_V./res;
aB3_I = aB3_V./res;

% figure
% plot(aC2_I, aC2_V, aB1_I, aB1_V, aB3_I, aB3_V);
% legend('2C', '1B', '3B')
% title('1st airampo 2C 1B 3B')


%------------------------------------------------------------------------------------------------------
%------------------------------------------------------------------------------------------------------

%w 6 monday

%airampo, mV
aBprim1_V = [538 538 540 539 540 539 539 538 538 536 534 530 529 526 524 521 517 510 496 431 421 406 388 366 325 385 227 157 119 97 82 68 54 41 27 14 13 12 11 9 8 7 6 5 3 2 1 0.9 0.8 0.7 0.6 0.5 0.4 0.2 0];
aBprim1_I = aBprim1_V./res;
aBprim2_V = [612 612 610 609 609 608 607 606 605 604 603 601 600 598 597 595 593 589 583 564 559 552 545 535 521 500 565 389 201 175 155 135 115 105 56 37 19 17 14 12 10.5 8.6 7.0 5.1 4.0 2.0 1.5 1.3 1.1 0.9 0.7 0.6 0.4 0.2 0];
aBprim2_I = aBprim2_V./res;

aCprim1_V = [602 602 602 602 602 601 600 598 594 591 587 585 584 581 576 571 563 545 497 582 466 444 415 392 342 270 189 92.0 80.0 72.0 62.9 53.0 42.8 36.7 25.5 17.7 8.8 7.0 6.8 6.0 5.0 4.3 3.3 2.5 1.7 0.9 0.6 0.6 0.5 0.4 0.3 0.2 0.1 0 0];
aCprim1_I = aCprim1_V./res;
%felk?lla beh?vde s?tta p? silver 2ggr
aCprim2_V = [562 562 445 444 442 429 412 413 400 395 381 377 375 370 372 365 360 354 343 292 278 266 255 237 217 185 141 80 73.6 66.0 58.8 50.3 41.8 33.6 25.6 16.8 8.3 7.5 6.6 5.6 4.8 4.0 3.1 2.4 1.5 0.7 0.6 0.5 0.5 0.4 0.3 0.2 0.1 0 0];
aCprim2_V = aCprim2_V./res;

% figure
% subplot(2, 1, 1)
% plot(aBprim1_I, aBprim1_V, aBprim2_I, aBprim2_V)
% title('2nd airampo 1B 2B')
% xlim([0 0.55])
% legend('1', '2')
% subplot(2, 1, 2)
% plot(aCprim1_I, aCprim1_V, aCprim2_V, aCprim2_V)
% title('2nd airampo 1C 2C')
% xlim([0 0.55])
% legend('1', '2')

%------------------------------------------------------------------------------------------------------
%------------------------------------------------------------------------------------------------------
%10/02

%airampo omgang 3 ---------------------------------------------------------
%med polymerpapper

a31_V = [480 479 477 476 476 475 474 473 471 467 465 463 461 458 455 449 441 424 374 353 335 317 300 268 228 184 130 65.0 56.8 50.0 43.9 37.4 31.4 25.2 18.9 12.3 6.1 5.4 4.7 3.6 2.5 2.0 1.6 1.2 0.8 0.7 0.7 0.6 0.6 0.1 0.1 0.1 0 0 0];
a31_I = a31_V./res;

% figure
% plot(aBprim1_I, aBprim1_V, aBprim2_I, aBprim2_V, a31_I, a31_V)
% title('2nd airampo Bprim Bpoly')
% xlim([0 0.55])
% legend('1', '2', 'poly')

curr = 0:0.01:0.1;
pmax = zeros(1, 11);
for i=1:11
    pmax(i) = NaN;
end
pmax(6) = 15;

%pmax: 15
figure
subplot(2, 1, 1)
plot(a31_I, a31_V)
title('Current I vs voltage V airampo optimal solution')
xlabel('Current [mA]')
ylabel('Voltage [mV]')
subplot(2, 1, 2)
plot(a31_I, a31_I.*a31_V, curr, pmax, '*')
title('Current I vs efficiency P airampo optimal solution')
xlabel('Current [mA]')
ylabel('Voltage')
legend('Efficiency', 'Maximum efficiency Pmax: 15')